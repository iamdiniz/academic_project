{% extends 'base.html' %}
{% set hide_navbar = False %}

{% block title %}Perfil - Educ+Invest{% endblock %}

{% block body %}
<div class="container mt-4">
        {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        {% for category, message in messages %}
        <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
        {% endfor %}
    {% endif %}
    {% endwith %}
    <h1 class="text-center mb-4">Meu Perfil</h1>

    <form method="POST" action="{{ url_for('perfil') }}">
        {% if session.get('tipo_usuario') == 'chefe' %}
            <div class="mb-3">
                <label for="nome" class="form-label">Nome</label>
                <input type="text" class="form-control" id="nome" name="nome" value="{{ usuario.nome }}" required>
            </div>
            <div class="mb-3">
                <label for="cargo" class="form-label">Cargo</label>
                <input type="text" class="form-control" id="cargo" name="cargo" value="{{ usuario.cargo }}" required>
            </div>
            <div class="mb-3">
                <label for="nome_empresa" class="form-label">Nome da Empresa</label>
                <input type="text" class="form-control" id="nome_empresa" name="nome_empresa" value="{{ usuario.nome_empresa }}">
            </div>
        {% elif session.get('tipo_usuario') == 'instituicao' %}
            <div class="mb-3">
                <label for="nome_instituicao" class="form-label">Nome da Instituição</label>
                <input type="text" class="form-control" id="nome_instituicao" name="nome_instituicao" value="{{ usuario.nome_instituicao }}" required>
            </div>
            <div class="mb-3">
                <label for="endereco_instituicao" class="form-label">Endereço</label>
                <input type="text" class="form-control" id="endereco_instituicao" name="endereco_instituicao" value="{{ usuario.endereco_instituicao }}" required>
            </div>
            <div class="mb-3">
                <label for="reitor" class="form-label">Reitor</label>
                <input type="text" class="form-control" id="reitor" name="reitor" value="{{ usuario.reitor }}" required>
            </div>
        {% endif %}
        <div class="mb-3">
            <label for="email" class="form-label">E-mail</label>
            <input type="email" class="form-control" id="email" name="email" value="{{ usuario.email }}" required>
        </div>
        <div class="mb-3">
            <label for="senha" class="form-label">Senha</label>
            <input type="password" class="form-control" id="senha" name="senha" placeholder="Digite uma nova senha (opcional)">
        </div>
        <button type="submit" class="btn btn-primary">Atualizar</button>
    </form>
</div>
{% endblock %}