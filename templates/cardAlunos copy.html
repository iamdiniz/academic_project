{% extends "base.html" %}
{% set hide_navbar = False %}

{% block title %}EducInvest - Alunos{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/cardAlunos.css') }}">
{% endblock %}

{% block body %}
<div class="container mt-2 pt-5">
    <h6 class="fw-bold text-center">Lista de Alunos</h6>

    <div class="row justify-content-center">
        {% for aluno in alunos %}
        <div class="col-md-5 col-lg-4 m-3">
            <div class="card shadow bg-light">
                <div class="card-header bg-dark text-white text-center fw-bold rounded-top">
                    {{ aluno.nome_jovem }}
                </div>
                <div class="card-body text-center">
                    <p><strong>Data de Nascimento:</strong> {{ aluno.data_nascimento }}</p>
                    <p><strong>Contato:</strong> {{ aluno.contato_jovem }}</p>
                    <p><strong>E-mail:</strong> {{ aluno.email }}</p>
                    <p><strong>Endereço:</strong> {{ aluno.endereco_jovem }}</p>
                    <p><strong>Curso:</strong> {{ aluno.curso }}</p>
                    <p><strong>Formação:</strong> {{ aluno.formacao }}</p>
                    <p><strong>Período:</strong> {{ aluno.periodo }}</p>

                    <!-- Gráfico de Pizza -->
                    <canvas id="chart-{{ aluno.id_jovem }}" width="200" height="200"></canvas>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function () {
        {% for aluno in alunos %}
        const ctx{{ aluno.id_jovem }} = document.getElementById('chart-{{ aluno.id_jovem }}').getContext('2d');
        new Chart(ctx{{ aluno.id_jovem }}, {
            type: 'pie',
            data: {
                labels: [
                    'Hard Skills', 'Soft Skills', 'Participação',
                    'Comunicação', 'Proatividade', 'Raciocínio',
                    'Domínio Técnico', 'Criatividade', 'Trabalho em Equipe'
                ],
                datasets: [{
                    label: 'Skills do Aluno',
                    data: [
                        {{ aluno.skills.hard_skills }},
                        {{ aluno.skills.soft_skills }},
                        {{ aluno.skills.participacao }},
                        {{ aluno.skills.comunicacao }},
                        {{ aluno.skills.proatividade }},
                        {{ aluno.skills.raciocinio }},
                        {{ aluno.skills.dominio_tecnico }},
                        {{ aluno.skills.criatividade }},
                        {{ aluno.skills.trabalho_em_equipe }}
                    ],
                    backgroundColor: [
                        '#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0',
                        '#9966FF', '#FF9F40', '#FFCD56', '#C9CBCF', '#4D5360'
                    ]
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'bottom',
                    }
                }
            }
        });
        {% endfor %}
    });
</script>
{% endblock %}
